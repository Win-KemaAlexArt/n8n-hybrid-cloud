{
  "name": "Telegram Bot - –ì–∏–±—Ä–∏–¥–Ω–∞—è –û–±—Ä–∞–±–æ—Ç–∫–∞",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "telegram-webhook",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-telegram",
      "name": "Telegram Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300],
      "webhookId": "telegram-bot-webhook"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.message.text}}",
              "operation": "startsWith",
              "value2": "/start"
            }
          ]
        }
      },
      "id": "if-start-command",
      "name": "–ö–æ–º–∞–Ω–¥–∞ /start?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "chatId": "={{$json.message.chat.id}}",
        "text": "üöÄ –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç n8n –≥–∏–±—Ä–∏–¥–Ω–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã.\n\nüìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n/status - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã\n/deploy - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ Vercel\n/analytics - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ Supabase\n/help - –ü–æ–º–æ—â—å"
      },
      "id": "send-welcome",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [680, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.message.text}}",
              "operation": "startsWith",
              "value2": "/status"
            }
          ]
        }
      },
      "id": "if-status-command",
      "name": "–ö–æ–º–∞–Ω–¥–∞ /status?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 400]
    },
    {
      "parameters": {
        "url": "https://nacpsvszdyabyuednbsg.supabase.co/rest/v1/system_status",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "options": {
          "headers": {
            "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5hY3BzdnN6ZHlhYnl1ZWRuYnNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MjAwNDMsImV4cCI6MjA3MDA5NjA0M30.-lo38TwmxnsoEzLSywM7Sz5kzy2vEfJU1Jc86AphvLo"
          }
        }
      },
      "id": "get-supabase-status",
      "name": "–ü–æ–ª—É—á–∏—Ç—å –°—Ç–∞—Ç—É—Å Supabase",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 400]
    },
    {
      "parameters": {
        "url": "https://api.vercel.com/v6/deployments",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "vercelApi",
        "options": {
          "headers": {
            "Authorization": "Bearer k3dQlIJIgMGed8jCNtjWdzEu"
          }
        }
      },
      "id": "get-vercel-deployments",
      "name": "–ü–æ–ª—É—á–∏—Ç—å –î–µ–ø–ª–æ–∏ Vercel",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 500]
    },
    {
      "parameters": {
        "jsCode": "// –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã\nconst supabaseStatus = $input.first().json;\nconst vercelDeployments = $input.last().json;\n\nconst statusMessage = `üìä **–°–¢–ê–¢–£–° –ì–ò–ë–†–ò–î–ù–û–ô –°–ò–°–¢–ï–ú–´**\n\nüü¢ **Supabase:**\n- –ü—Ä–æ–µ–∫—Ç: nacpsvszdyabyuednbsg\n- –°—Ç–∞—Ç—É—Å: ${supabaseStatus.status || '–ê–∫—Ç–∏–≤–µ–Ω'}\n- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL\n\nüü¢ **Vercel:**\n- –ê–∫—Ç–∏–≤–Ω—ã—Ö –¥–µ–ø–ª–æ–µ–≤: ${vercelDeployments.deployments?.length || 0}\n- –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π: ${vercelDeployments.deployments?.[0]?.createdAt || 'N/A'}\n- –°—Ç–∞—Ç—É—Å: ${vercelDeployments.deployments?.[0]?.state || 'N/A'}\n\nüü¢ **AWS:**\n- –†–µ–≥–∏–æ–Ω: us-east-1\n- –ò–Ω—Å—Ç–∞–Ω—Å: t2.micro\n- –°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é\n\n‚ö° –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≥–∏–±—Ä–∏–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ!`;\n\nreturn [{\n  chatId: $('Telegram Webhook').first().json.message.chat.id,\n  statusMessage: statusMessage\n}];"
      },
      "id": "format-status",
      "name": "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –°—Ç–∞—Ç—É—Å",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1120, 450]
    },
    {
      "parameters": {
        "chatId": "={{$json.chatId}}",
        "text": "={{$json.statusMessage}}",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "id": "send-status",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1340, 450],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.message.text}}",
              "operation": "startsWith",
              "value2": "/deploy"
            }
          ]
        }
      },
      "id": "if-deploy-command",
      "name": "–ö–æ–º–∞–Ω–¥–∞ /deploy?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 600]
    },
    {
      "parameters": {
        "url": "https://api.vercel.com/v13/deployments",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "name",
              "value": "n8n-webhook-gateway"
            },
            {
              "name": "gitSource",
              "value": "{\"type\":\"github\",\"repo\":\"Win-KemaAlexArt/n8n-webhook-gateway\",\"ref\":\"master\"}"
            }
          ]
        },
        "options": {
          "headers": {
            "Authorization": "Bearer k3dQlIJIgMGed8jCNtjWdzEu",
            "Content-Type": "application/json"
          }
        }
      },
      "id": "trigger-vercel-deploy",
      "name": "–ó–∞–ø—É—Å—Ç–∏—Ç—å –î–µ–ø–ª–æ–π Vercel",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [900, 600]
    },
    {
      "parameters": {
        "chatId": "={{$('Telegram Webhook').first().json.message.chat.id}}",
        "text": "üöÄ **–î–ï–ü–õ–û–ô –ó–ê–ü–£–©–ï–ù**\n\nüì¶ –ü—Ä–æ–µ–∫—Ç: n8n-webhook-gateway\nüîó URL: {{$json.url}}\n‚è±Ô∏è –°—Ç–∞—Ç—É—Å: {{$json.readyState}}\n\n‚úÖ –î–µ–ø–ª–æ–π –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "id": "send-deploy-status",
      "name": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å –î–µ–ø–ª–æ—è",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1120, 600],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "{\"ok\": true, \"message\": \"Webhook processed successfully\"}"
      },
      "id": "webhook-response",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1560, 300]
    },
    {
      "parameters": {
        "table": "workflow_executions",
        "operation": "insert",
        "records": {
          "values": {
            "workflow_name": "telegram-bot-hybrid",
            "execution_time": "={{new Date().toISOString()}}",
            "user_id": "={{$json.message.from.id}}",
            "command": "={{$json.message.text}}",
            "chat_id": "={{$json.message.chat.id}}",
            "status": "completed"
          }
        }
      },
      "id": "log-to-supabase",
      "name": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [1340, 300],
      "credentials": {
        "supabaseApi": {
          "id": "supabase-credentials",
          "name": "Supabase API"
        }
      }
    }
  ],
  "connections": {
    "Telegram Webhook": {
      "main": [
        [
          {
            "node": "–ö–æ–º–∞–Ω–¥–∞ /start?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ö–æ–º–∞–Ω–¥–∞ /start?": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–ö–æ–º–∞–Ω–¥–∞ /status?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ö–æ–º–∞–Ω–¥–∞ /status?": {
      "main": [
        [
          {
            "node": "–ü–æ–ª—É—á–∏—Ç—å –°—Ç–∞—Ç—É—Å Supabase",
            "type": "main",
            "index": 0
          },
          {
            "node": "–ü–æ–ª—É—á–∏—Ç—å –î–µ–ø–ª–æ–∏ Vercel",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–ö–æ–º–∞–Ω–¥–∞ /deploy?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∏—Ç—å –°—Ç–∞—Ç—É—Å Supabase": {
      "main": [
        [
          {
            "node": "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –°—Ç–∞—Ç—É—Å",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∏—Ç—å –î–µ–ø–ª–æ–∏ Vercel": {
      "main": [
        [
          {
            "node": "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –°—Ç–∞—Ç—É—Å",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –°—Ç–∞—Ç—É—Å": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ö–æ–º–∞–Ω–¥–∞ /deploy?": {
      "main": [
        [
          {
            "node": "–ó–∞–ø—É—Å—Ç–∏—Ç—å –î–µ–ø–ª–æ–π Vercel",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ó–∞–ø—É—Å—Ç–∏—Ç—å –î–µ–ø–ª–æ–π Vercel": {
      "main": [
        [
          {
            "node": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å –î–µ–ø–ª–æ—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ": {
      "main": [
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å": {
      "main": [
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Ç—É—Å –î–µ–ø–ª–æ—è": {
      "main": [
        [
          {
            "node": "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1.0.0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "n8n-hybrid-ecosystem"
  },
  "id": "telegram-bot-hybrid",
  "tags": [
    {
      "createdAt": "2025-08-07T00:06:53.000Z",
      "updatedAt": "2025-08-07T00:06:53.000Z",
      "id": "hybrid-automation",
      "name": "–ì–∏–±—Ä–∏–¥–Ω–∞—è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"
    }
  ]
}
